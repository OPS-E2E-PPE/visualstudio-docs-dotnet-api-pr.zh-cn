<Type Name="IDeploymentStep" FullName="Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep">
  <Metadata><Meta Name="ms.openlocfilehash" Value="f1f75d57f318325267927301792f16f127d022f5" /><Meta Name="ms.sourcegitcommit" Value="7439021cdeee6a9ef5d4640250701344f6cbba15" /><Meta Name="ms.translationtype" Value="MT" /><Meta Name="ms.contentlocale" Value="zh-CN" /><Meta Name="ms.lasthandoff" Value="08/13/2019" /><Meta Name="ms.locfileid" Value="69011732" /></Metadata><TypeSignature Language="C#" Value="public interface IDeploymentStep" />
  <TypeSignature Language="ILAsm" Value=".class public interface auto ansi abstract IDeploymentStep" />
  <TypeSignature Language="DocId" Value="T:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep" />
  <AssemblyInfo>
    <AssemblyName>Microsoft.VisualStudio.SharePoint</AssemblyName>
    <AssemblyVersion>15.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Interfaces />
  <Docs>
    <summary><span data-ttu-id="69a3b-101">表示 SharePoint 项目的部署步骤。</span><span class="sxs-lookup"><span data-stu-id="69a3b-101">Represents a deployment step for SharePoint projects.</span></span></summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="69a3b-102"><xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep>实现接口, 为 SharePoint 项目创建自定义部署步骤。</span><span class="sxs-lookup"><span data-stu-id="69a3b-102">Implement the <xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep> interface to create a custom deployment step for SharePoint projects.</span></span> <span data-ttu-id="69a3b-103">部署 SharePoint 项目时，[!INCLUDE[vs_current_short](~/includes/vs-current-short-md.md)] 会执行一系列部署步骤。</span><span class="sxs-lookup"><span data-stu-id="69a3b-103">When you deploy a SharePoint project, [!INCLUDE[vs_current_short](~/includes/vs-current-short-md.md)] executes a series of deployment steps.</span></span> <span data-ttu-id="69a3b-104">Visual Studio 包含用于很多任务的内置部署步骤，如收回和添加解决方案。</span><span class="sxs-lookup"><span data-stu-id="69a3b-104">Visual Studio includes built-in deployment steps for many tasks, such as retracting and adding solutions.</span></span> <span data-ttu-id="69a3b-105">但是，还可以创建自己的部署步骤。</span><span class="sxs-lookup"><span data-stu-id="69a3b-105">However, you can also create your own deployment steps.</span></span> <span data-ttu-id="69a3b-106">有关详细信息, 请参阅[扩展 SharePoint 打包和部署](/visualstudio/sharepoint/extending-sharepoint-packaging-and-deployment)以及[演练:为 SharePoint 项目](/visualstudio/sharepoint/walkthrough-creating-a-custom-deployment-step-for-sharepoint-projects)创建自定义部署步骤。</span><span class="sxs-lookup"><span data-stu-id="69a3b-106">For more information, see [Extending SharePoint Packaging and Deployment](/visualstudio/sharepoint/extending-sharepoint-packaging-and-deployment) and [Walkthrough: Creating a Custom Deployment Step for SharePoint Projects](/visualstudio/sharepoint/walkthrough-creating-a-custom-deployment-step-for-sharepoint-projects).</span></span>  
  
 <span data-ttu-id="69a3b-107">部署步骤是每个 Visual Studio 实例实例化一次的单一实例。</span><span class="sxs-lookup"><span data-stu-id="69a3b-107">A deployment step is a singleton that is instantiated once per Visual Studio instance.</span></span>  
  
 <span data-ttu-id="69a3b-108">实现此接口的类必须包括<xref:System.ComponentModel.Composition.ExportAttribute?displayProperty=fullName> <xref:Microsoft.VisualStudio.SharePoint.Deployment.DeploymentStepAttribute>和要由项目系统发现的。</span><span class="sxs-lookup"><span data-stu-id="69a3b-108">Classes that implement this interface must include the <xref:System.ComponentModel.Composition.ExportAttribute?displayProperty=fullName> and the <xref:Microsoft.VisualStudio.SharePoint.Deployment.DeploymentStepAttribute> to be discovered by the project system.</span></span>  
  
 ]]></format>
    </remarks>
  </Docs>
  <Members>
    <Member MemberName="CanExecute">
      <MemberSignature Language="C#" Value="public bool CanExecute (Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentContext context);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance bool CanExecute(class Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentContext context) cil managed" />
      <MemberSignature Language="DocId" Value="M:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.CanExecute(Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentContext)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>Microsoft.VisualStudio.SharePoint</AssemblyName>
        <AssemblyVersion>15.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="context" Type="Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentContext" />
      </Parameters>
      <Docs>
        <param name="context"><span data-ttu-id="69a3b-109">一个提供可用于确定在其中执行部署步骤的上下文的对象。</span><span class="sxs-lookup"><span data-stu-id="69a3b-109">An object that provides information you can use to determine the context in which the deployment step is executing.</span></span></param>
        <summary><span data-ttu-id="69a3b-110">确定是否可在当前上下文中执行部署步骤。</span><span class="sxs-lookup"><span data-stu-id="69a3b-110">Determines whether the deployment step can be executed in the current context.</span></span></summary>
        <returns><span data-ttu-id="69a3b-111">如果可执行部署步骤，则为 <see langword="true" />，否则为 <see langword="false" />。</span><span class="sxs-lookup"><span data-stu-id="69a3b-111"><see langword="true" /> if the deployment step can be executed; otherwise, <see langword="false" />.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="69a3b-112">当使用 Visual Studio 中的 "**生成**" 菜单上的 "**收回**" 选项收回 SharePoint 项目时, 将从 UI 线程执行此方法。</span><span class="sxs-lookup"><span data-stu-id="69a3b-112">This method is executed from the UI thread when a SharePoint project is retracted by using the **Retract** option on the **Build** menu in Visual Studio.</span></span> <span data-ttu-id="69a3b-113">此方法在以下情况下在后台线程中执行:</span><span class="sxs-lookup"><span data-stu-id="69a3b-113">This method is executed from a background thread in the following cases:</span></span>  
  
-   <span data-ttu-id="69a3b-114">调试后自动收回项目的时间。</span><span class="sxs-lookup"><span data-stu-id="69a3b-114">When a project is automatically retracted after debugging.</span></span> <span data-ttu-id="69a3b-115">如果在 "项目属性" 的 " **SharePoint** " 选项卡上选择了 "**调试后自动收回**" 属性, 则会发生这种情况。</span><span class="sxs-lookup"><span data-stu-id="69a3b-115">This occurs when the **Auto-retract after debugging** property on the **SharePoint** tab of the project properties is selected.</span></span>  
  
-   <span data-ttu-id="69a3b-116">部署项目时。</span><span class="sxs-lookup"><span data-stu-id="69a3b-116">When a project is deployed.</span></span>  
  
 <span data-ttu-id="69a3b-117">Visual Studio 对象模型中的某些 Api 在后台线程中可能无法正常工作。</span><span class="sxs-lookup"><span data-stu-id="69a3b-117">Some APIs in the Visual Studio object model might not work as expected from a background thread.</span></span> <span data-ttu-id="69a3b-118">如果需要从<xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.CanExecute%2A>方法调用其中一个 api, 可以<xref:System.Threading.SynchronizationContext>使用对象封送对 UI 线程的调用。</span><span class="sxs-lookup"><span data-stu-id="69a3b-118">If you need to call one of these APIs from the <xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.CanExecute%2A> method, you can marshal the call to the UI thread by using a <xref:System.Threading.SynchronizationContext> object.</span></span> <span data-ttu-id="69a3b-119">在<xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.Initialize%2A>方法的实现中, <xref:System.Threading.SynchronizationContext.Current%2A>使用属性获取<xref:System.Threading.SynchronizationContext> UI 线程的。</span><span class="sxs-lookup"><span data-stu-id="69a3b-119">In your implementation of the <xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.Initialize%2A> method, use the <xref:System.Threading.SynchronizationContext.Current%2A> property to get the <xref:System.Threading.SynchronizationContext> of the UI thread.</span></span> <span data-ttu-id="69a3b-120">然后, 在<xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.CanExecute%2A>方法的实现中, 使用<xref:System.Threading.SynchronizationContext>对象的<xref:System.Threading.SynchronizationContext.Post%2A>或<xref:System.Threading.SynchronizationContext.Send%2A>方法来封送对 UI 线程的调用。</span><span class="sxs-lookup"><span data-stu-id="69a3b-120">Then, in your implementation of the <xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.CanExecute%2A> method, use the <xref:System.Threading.SynchronizationContext.Post%2A> or <xref:System.Threading.SynchronizationContext.Send%2A> methods of the <xref:System.Threading.SynchronizationContext> object to marshal the call to the UI thread.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="Execute">
      <MemberSignature Language="C#" Value="public void Execute (Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentContext context);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void Execute(class Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentContext context) cil managed" />
      <MemberSignature Language="DocId" Value="M:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.Execute(Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentContext)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>Microsoft.VisualStudio.SharePoint</AssemblyName>
        <AssemblyVersion>15.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="context" Type="Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentContext" />
      </Parameters>
      <Docs>
        <param name="context"><span data-ttu-id="69a3b-121">一个提供可用于确定在其中执行部署步骤的上下文的对象。</span><span class="sxs-lookup"><span data-stu-id="69a3b-121">An object that provides information you can use to determine the context in which the deployment step is executing.</span></span></param>
        <summary><span data-ttu-id="69a3b-122">执行部署步骤。</span><span class="sxs-lookup"><span data-stu-id="69a3b-122">Executes the deployment step.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="69a3b-123">在此方法中实现部署步骤逻辑。</span><span class="sxs-lookup"><span data-stu-id="69a3b-123">Implement your deployment step logic in this method.</span></span>  
  
 <span data-ttu-id="69a3b-124">当使用 Visual Studio 中的 "**生成**" 菜单上的 "**收回**" 选项收回 SharePoint 项目时, 将从 UI 线程执行此方法。</span><span class="sxs-lookup"><span data-stu-id="69a3b-124">This method is executed from the UI thread when a SharePoint project is retracted by using the **Retract** option on the **Build** menu in Visual Studio.</span></span> <span data-ttu-id="69a3b-125">此方法在以下情况下在后台线程中执行:</span><span class="sxs-lookup"><span data-stu-id="69a3b-125">This method is executed from a background thread in the following cases:</span></span>  
  
-   <span data-ttu-id="69a3b-126">调试后自动收回项目的时间。</span><span class="sxs-lookup"><span data-stu-id="69a3b-126">When a project is automatically retracted after debugging.</span></span> <span data-ttu-id="69a3b-127">如果在 "项目属性" 的 " **SharePoint** " 选项卡上选择了 "**调试后自动收回**" 属性, 则会发生这种情况。</span><span class="sxs-lookup"><span data-stu-id="69a3b-127">This occurs when the **Auto-retract after debugging** property on the **SharePoint** tab of the project properties is selected.</span></span>  
  
-   <span data-ttu-id="69a3b-128">部署项目时。</span><span class="sxs-lookup"><span data-stu-id="69a3b-128">When a project is deployed.</span></span>  
  
 <span data-ttu-id="69a3b-129">Visual Studio 对象模型中的某些 Api 在后台线程中可能无法正常工作。</span><span class="sxs-lookup"><span data-stu-id="69a3b-129">Some APIs in the Visual Studio object model might not work as expected from a background thread.</span></span> <span data-ttu-id="69a3b-130">如果需要从<xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.Execute%2A>方法调用其中一个 api, 可以<xref:System.Threading.SynchronizationContext>使用对象封送对 UI 线程的调用。</span><span class="sxs-lookup"><span data-stu-id="69a3b-130">If you need to call one of these APIs from the <xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.Execute%2A> method, you can marshal the call to the UI thread by using a <xref:System.Threading.SynchronizationContext> object.</span></span> <span data-ttu-id="69a3b-131">在<xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.Initialize%2A>方法的实现中, <xref:System.Threading.SynchronizationContext.Current%2A>使用属性获取<xref:System.Threading.SynchronizationContext> UI 线程的。</span><span class="sxs-lookup"><span data-stu-id="69a3b-131">In your implementation of the <xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.Initialize%2A> method, use the <xref:System.Threading.SynchronizationContext.Current%2A> property to get the <xref:System.Threading.SynchronizationContext> of the UI thread.</span></span> <span data-ttu-id="69a3b-132">然后, 在<xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.Execute%2A>方法的实现中, 使用<xref:System.Threading.SynchronizationContext>对象的<xref:System.Threading.SynchronizationContext.Post%2A>或<xref:System.Threading.SynchronizationContext.Send%2A>方法来封送对 UI 线程的调用。</span><span class="sxs-lookup"><span data-stu-id="69a3b-132">Then, in your implementation of the <xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.Execute%2A> method, use the <xref:System.Threading.SynchronizationContext.Post%2A> or <xref:System.Threading.SynchronizationContext.Send%2A> methods of the <xref:System.Threading.SynchronizationContext> object to marshal the call to the UI thread.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="Initialize">
      <MemberSignature Language="C#" Value="public void Initialize (Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStepInfo stepInfo);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void Initialize(class Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStepInfo stepInfo) cil managed" />
      <MemberSignature Language="DocId" Value="M:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.Initialize(Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStepInfo)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>Microsoft.VisualStudio.SharePoint</AssemblyName>
        <AssemblyVersion>15.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="stepInfo" Type="Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStepInfo" />
      </Parameters>
      <Docs>
        <param name="stepInfo"><span data-ttu-id="69a3b-133">一个包含有关部署步骤信息的对象。</span><span class="sxs-lookup"><span data-stu-id="69a3b-133">An object that contains information about the deployment step.</span></span></param>
        <summary><span data-ttu-id="69a3b-134">启动部署步骤。</span><span class="sxs-lookup"><span data-stu-id="69a3b-134">Initializes the deployment step.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="69a3b-135">第一次初始化部署步骤时, Visual Studio 将调用此方法。</span><span class="sxs-lookup"><span data-stu-id="69a3b-135">Visual Studio calls this method when the deployment step is first initialized.</span></span> <span data-ttu-id="69a3b-136">每个 Visual Studio 实例只发生一次。</span><span class="sxs-lookup"><span data-stu-id="69a3b-136">This happens only once per Visual Studio instance.</span></span>  
  
 <span data-ttu-id="69a3b-137">在的<xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.Initialize%2A>实现中, 设置`stepInfo`参数的属性, 以指定部署步骤的名称、说明和其他详细信息。</span><span class="sxs-lookup"><span data-stu-id="69a3b-137">In your implementation of <xref:Microsoft.VisualStudio.SharePoint.Deployment.IDeploymentStep.Initialize%2A>, set properties of the `stepInfo` parameter to specify the name, description, and other details for the deployment step.</span></span>  
  
 <span data-ttu-id="69a3b-138">始终从 UI 线程执行此方法。</span><span class="sxs-lookup"><span data-stu-id="69a3b-138">This method is always executed from the UI thread.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
  </Members>
</Type>
